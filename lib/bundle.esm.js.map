{"version":3,"file":"bundle.esm.js","sources":["../src/wesocket/emiiter.ts"],"sourcesContent":["function Emiiter() {}\n\nEmiiter.prototype.on = Emiiter.prototype.addEventListener = function (\n  eventName: string,\n  fn: Function\n) {\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + eventName] =\n    this._callbacks['$' + eventName] || []).push(fn);\n  return this;\n};\n\nEmiiter.prototype.off = Emiiter.prototype.removeEventListener = function (\n  eventName: string,\n  fn: Function\n) {\n  if (!this._callback) {\n    return this;\n  }\n  let _callbacks: Array<any> = this._callbacks['$' + eventName];\n  if (!_callbacks) {\n    return this;\n  }\n  for (let i = 0; i < _callbacks.length; i++) {\n    if (_callbacks[i] === fn || _callbacks[i].fn === fn) {\n      _callbacks.splice(i, 1);\n    }\n  }\n  return this;\n};\n\nEmiiter.prototype.once = function (eventName: string, fn: Function) {\n  function once() {\n    this.off(eventName, fn);\n    fn.call(this, arguments);\n  }\n  once.fn = fn;\n  this.on(eventName, once);\n  return this;\n};\n\nEmiiter.prototype.emit = function (eventName: string) {\n  let args = [...arguments].slice(1);\n  let _callback: Array<Function> = this._callbacks['$' + eventName];\n  if (_callback) {\n    for (let callback of _callback) {\n      callback.call(this, ...args);\n    }\n  }\n  return this;\n};\n\nexport default Emiiter;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAS,OAAO,MAAK;AAErB,OAAO,CAAC,SAAS,CAAC,EAAE,GAAG,OAAO,CAAC,SAAS,CAAC,gBAAgB,GAAG,UAC1D,SAAiB,EACjB,EAAY,EAAA;IAEZ,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC;AACxC,IAAA,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,SAAS,CAAC;AAC/B,QAAA,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,SAAS,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;AACnD,IAAA,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,OAAO,CAAC,SAAS,CAAC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,mBAAmB,GAAG,UAC9D,SAAiB,EACjB,EAAY,EAAA;AAEZ,IAAA,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;AACnB,QAAA,OAAO,IAAI,CAAC;AACb,KAAA;IACD,IAAI,UAAU,GAAe,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,SAAS,CAAC,CAAC;IAC9D,IAAI,CAAC,UAAU,EAAE;AACf,QAAA,OAAO,IAAI,CAAC;AACb,KAAA;AACD,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC1C,QAAA,IAAI,UAAU,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;AACnD,YAAA,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACzB,SAAA;AACF,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,OAAO,CAAC,SAAS,CAAC,IAAI,GAAG,UAAU,SAAiB,EAAE,EAAY,EAAA;AAChE,IAAA,SAAS,IAAI,GAAA;AACX,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;AACxB,QAAA,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;KAC1B;AACD,IAAA,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;AACb,IAAA,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AACzB,IAAA,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,OAAO,CAAC,SAAS,CAAC,IAAI,GAAG,UAAU,SAAiB,EAAA;IAClD,IAAI,IAAI,GAAG,aAAI,CAAA,EAAA,EAAA,SAAS,QAAE,KAAK,CAAC,CAAC,CAAC,CAAC;IACnC,IAAI,SAAS,GAAoB,IAAI,CAAC,UAAU,CAAC,GAAG,GAAG,SAAS,CAAC,CAAC;AAClE,IAAA,IAAI,SAAS,EAAE;AACb,QAAA,KAAqB,UAAS,EAAT,WAAA,GAAA,SAAS,EAAT,EAAS,GAAA,WAAA,CAAA,MAAA,EAAT,IAAS,EAAE;AAA3B,YAAA,IAAI,QAAQ,GAAA,WAAA,CAAA,EAAA,CAAA,CAAA;YACf,QAAQ,CAAC,IAAI,CAAb,KAAA,CAAA,QAAQ,iBAAM,IAAI,CAAA,EAAK,IAAI,EAAE,KAAA,CAAA,CAAA,CAAA;AAC9B,SAAA;AACF,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AACd,CAAC;;;;"}